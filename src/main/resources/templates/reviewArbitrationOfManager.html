<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="../static/reviewComplaintsOfManagerCSS.css" type="text/css"/>
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
    <script>
        var account=localStorage.account;
        var name=localStorage.nickname;

        window.onload=function () {
            document.getElementById('username').innerText = name;
            var username = document.getElementById('username');
            username.onmouseover = function () {
                document.getElementById("menu").style.display = "inherit";
            }
            document.getElementById("userbar").onmouseleave = function (e) {
                if (e.target.id != "nemu") {
                    document.getElementById("menu").style.display = "none";
                }
            }

            clickArbitration();

        }

        function logout(){
            window.open("./homepage.html","_self");
        }
    </script>


</head>
<body>

<div id="userbar" style="width:100%;position: fixed;z-index: 3;padding-left: 12%;">
    <li><img src="../static/pic/logo.png" style="height: 60px;margin-left: -465%"></li>
    <div style=" z-index:3;display: inline-block;float:left;margin-left: 10%;" >
        <ul>
            <li><a href="#task"></a></li>
            <li><a href="#news"></a></li>
            <li><a href="#contact"></a></li>
            <li><a href="#about"></a></li>
        </ul>
    </div>
    <br>

    <div style="float: right;z-index:3;margin-right:20px;display: inline-block;padding-right: 22%;margin-top: -65px">
        <ul>
            <li style="z-index: 3">
                <a style="color:ghostwhite; font-size: 24px;font-family:Microsoft YaHei UI;">
                    你好，管理员
                    <u id="username" style="color:ghostwhite; font-size: 24px;font-family:Microsoft YaHei UI;">用户</u>
                </a>
            </li>
        </ul>

        <div id="menu" style="margin-left: 62%;margin-top: -13%;z-index: 5;display: none;">
            <button onclick="logout()" style="border-radius:0;background: black;color:white;font-size: 20px;margin-top: -2px;width:120px;border-color: white;border-width: 1px;">退出账户</button>
        </div>
    </div>


</div>
<div style="position: fixed;width: 101%;height:90px;background-color: black;opacity: 1;z-index: 2;margin-top: -1%;margin-left: -1%"></div>
<br>

<div class="titleBox">
    <h2 style="padding-top: 2%;color: #232323;padding-left: 11.5%">系统中心</h2>
    <p style="color: #939393;padding-left: 11.5%">在这里，可以集中查看管理系统的用户、收益、使用情况等信息,也可以处理待审核内容</p>
</div>

<div class="maincut"></div>

<div class="mainbody">
    <div class="mainbox">
        <div class="left_menu_box">
            <ul class="menus">
                <li><p>系统数据</p></li>
                <hr style="margin-top: -2%"/>
                <li><a href="./systemInformationPage.html" class="" >统计数据</a></li><br>
            </ul>
            <hr style=""/>
            <ul class="menus">
                <li style="margin-top: -3%"><p>审核处理</p></li>
                <hr style="margin-top: -2%"/>
                <li><a href="#" class="">图片审核</a></li><br>
                <li><a href="./reviewComplaintsOfManager.html" class="">投诉审核</a></li><br>
                <li><a href="./reviewQueryOfManager.html" class="">结果质疑</a></li><br>
                <li><a href="./reviewArbitrationOfManager.html" class=""  style="color: violet">结果仲裁</a></li><br>
                <li><a href="./reviewAppealOfManager.html" class="">申诉审核</a></li>
            </ul>
        </div>

        <div class="mainPanel" style="font-size: 20px;">
            <h3 style="padding-left: 3%;">结果仲裁</h3>
            <hr />
            <!-- <a href="javascript:void(0)" onclick="clickReview()" class="review" id="review">待审核</a>-->
            <div class="taskbox" id="taskbox"></div>

        </div>

    </div>



</div>

<div style="width:101%; float: bottom; background-color: black;margin-left: -0.2%;margin-bottom: -100px;">
    <img src="../static/pic/logo.png" style="width:8%">
    <span style="color: white;text-align: center;font-size: 25px;vertical-align: center">让世界的智慧凝聚为你的眼</span>
    <span style="color: white;text-align: center;font-size: 25px;float: right;padding-top: 20px;margin-right: 0.4%">怎么码都码不队</span>
</div>


<script>

    var managerID=localStorage.accout;

    var taskbox=document.getElementById('taskbox');

    var taskRequestorIDs=new Array();
    var taskRequestorNames=new Array();
    var taskPicurls=new Array();
    var taskPicIDs=new Array();

    function clickArbitration() {
        /*审核待仲裁列表 ，requestorID，picid,url*/
        var html = $.ajax({
            type: "Post",
            url: '/review/arbitration',
            dataType:'json',
            success: function(myobj) {
                taskRequestorIDs=[];
                taskRequestorNames=[];
                taskPicIDs=[];
                taskPicurls=[];

                taskRequestorIDs=myobj.requestorid;
                taskRequestorNames=myobj.requestorname;
                taskPicIDs=myobj.picid;
                taskPicurls=myobj.picurl;
                $("#info").children("div").remove();
                loadReview();

            },
            error: function() {
                alert("error");
            }
        });
        /*$("#info").children("div").remove();
        loadReview();*/
    }




    /*任务，picid，正确答案list（可能0，也可能大于1，拥有答案，返回结果成功*/
    var obj={
        picID:taskPicIDs[i],
        answer:answerlist,
    };
    var html = $.ajax({
        type: "Post",
        url: '/checkArbitration',
        data:JSON.stringify(obj),
        dataType:'json',
        contentType: "application/json",
        async: false,
        success: function(data) {
            clickReview();
        },
        error: function() {
            alert("error");
        }
    });

    /* 给图片id，获取list含标注id，标注information，人数（标注该information的人数），对应的workerid，workername*/
    var obj=new Object();
    obj={
        picID:picID
    };
    var html = $.ajax({
        type: "Post",
        url: '/review/arbitrationlist',
        dataType:'json',
        contentType: "application/json",
        async: false,
        data:JSON.stringify(obj),
        success: function(myobj) {
            console.log(myobj);
            console.log(myobj.Rid);
            labelIDs=[];
            labelInfos=[];
            isRight=[];
            peoples=[];
            workerIDs=[];
            workerNames=[];

            labelIDs=myobj.labelid;
            labelInfos=myobj.info;
            isRight=myobj.right;
            peoples=myobj.num;
            workerIDs=myobj.workerid;
            workerNames=myobj.workername;

            $("#main").children("div").remove();
            loadtask();
        },
        error: function() {
            alert("error");
        }
    });



</script>
</body>
</html>